/*
 * LogFit.js v0.5.1
 */
!function(t){function o(){this.config={},this.setConfigs()}o.prototype.setConfigs=function(){this.version="v0.5.1",this.setConfigWithDefault("source","logfit-test"),this.setConfigWithDefault("ingestEndpoint","https://ingest.log.fit/log"),this.setConfigWithDefault("ipEndpoint","https://api.ipify.org?format=json")},o.prototype.setConfigWithDefault=function(t,o){"undefined"!=typeof LogFitConfig&&t in LogFitConfig?this.config[t]=LogFitConfig[t]:this.config[t]=o},o.prototype.report=function(){this.generateData(t=>{this.post(t)})},o.prototype.generateData=function(t){const o={};o.path=window.location.href,o.referrer=document.referrer,o.user_agent=navigator.userAgent,o.user_token=this.getUserToken();this.ajax("GET",this.config.ipEndpoint,null,e=>{o.ip=e.ip,t(o)})},o.prototype.post=function(t){const o={source:this.config.source,row_data:t};this.ajax("POST",this.config.ingestEndpoint,o)},o.prototype.ajax=function(t,o,e,n){const i=new XMLHttpRequest;i.open(t,o),i.setRequestHeader("Content-Type","application/json"),i.responseType="json",i.onload=(()=>{n&&n(i.response)});let s=null;null!=e&&(s=JSON.stringify(e)),i.send(s)},o.prototype.getUserToken=function(){function t(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const o=16*Math.random()|0;return("x"==t?o:3&o|8).toString(16)})}try{let o=localStorage.getItem("logfitToken");return o||(o=t(),localStorage.setItem("logfitToken",o)),o}catch(o){return t()}},(new o).report()}("undefined"==typeof LogFit?LogFit={}:LogFit);
